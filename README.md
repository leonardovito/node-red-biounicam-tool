# node-red-biounicam-tool
#### Install
To install these nodes in Node-Red, follow this guide. <br/>
<br/>
First of all, open the terminal or cmd(Windows). Then move to your Node-Red user directory (typically "~/.node-red") and use the command **npm install** by specify the path of the node's folder (the folder of a node contain a file named _package.json_). Example:<br/>
<br/>
**1. Linux or Mac OS:<br/>**
  . _cd ~/.node-red<br/>
  . npm install (insert path of node folder)_<br/>
**2. Windows:<br/>**
  . _cd C:\\Users\\(username)\\.node_red<br/>
  . npm install (insert path of node folder)_<br/>

Remember to restart Node-Red after have installed or updated one or more nodes.<br/>
#### Uninstall
For uninstall the module go under Node-Red user directory, as we explained above, and use this command:<br/>

_npm uninstall node-red-biounicam-tool_<br/>

### FLOWS
#### Increment Fasta

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/IncementFasta.PNG)

```json
[{"id":"9fe9dc8a.5b72e","type":"tab","label":"Form-Increment-Fasta","disabled":false,"info":""},{"id":"6d405c0f.1e6754","type":"http in","z":"9fe9dc8a.5b72e","name":"","url":"/incrementfasta","method":"post","upload":true,"swaggerDoc":"","x":180,"y":420,"wires":[["8d4abaa2.f78e98","d8fd35a9.9452e8"]]},{"id":"8d4abaa2.f78e98","type":"function","z":"9fe9dc8a.5b72e","name":"","func":"//msg.name = msg.req.files[0].originalname;\n//global.set(\"name\",msg.req.files[0].originalname);\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"incrementFasta/out/\" + msg.req.files[0].originalname\n\nreturn [msg,null];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":460,"wires":[["ef3ad2f9.41025"]]},{"id":"4f44a3ae.49e01c","type":"http response","z":"9fe9dc8a.5b72e","name":"","statusCode":"","headers":{},"x":1970,"y":460,"wires":[]},{"id":"ef3ad2f9.41025","type":"file","z":"9fe9dc8a.5b72e","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":490,"y":460,"wires":[["6922d16b.75946"]]},{"id":"321ddc39.18dc64","type":"increment_fasta_contig","z":"9fe9dc8a.5b72e","name":"","fasta":"","pathfolder":"","outputname":"","x":970,"y":420,"wires":[["1918f053.89216","242af0d9.e8993","9f3980d2.e801e"]]},{"id":"d8fd35a9.9452e8","type":"function","z":"9fe9dc8a.5b72e","name":"","func":"//global.set(\"name\",msg.payload.outputname);\n\nmsg.payload.fasta = \"incrementFasta/out/\" + msg.req.files[0].originalname\nmsg.payload.pathfolder = \"incrementFasta/out\"\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":480,"y":340,"wires":[["82e6ff40.f634d"]]},{"id":"1918f053.89216","type":"function","z":"9fe9dc8a.5b72e","name":"","func":"//var name = global.get(\"name\");\nif(msg.payload.stdout!==\"Error\") {\nif(msg.payload.zip===\"no\") {\n    msg.payload = msg.payload.outputname\n    return[msg,null,null]\n}\nelse if(msg.payload.zip===\"yes\") {\n    msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n    msg.payload.pathIn = \"incrementFasta/out\"\n    msg.payload.pathOut = \"incrementFasta/\"+msg.payload.outputname\n    return [null,msg,null]\n}\n}\nelse {\n    return [null,null,msg]\n}\n","outputs":3,"noerr":0,"initialize":"","finalize":"","x":1200,"y":440,"wires":[["a9091e05.a7a93"],["fce4b1de.c11a9"],["10981fc1.3d3d1"]]},{"id":"70ccd55f.51677c","type":"template","z":"9fe9dc8a.5b72e","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/incrementFasta/out/{{payload}}\" onclick=\"clickAndDisable(this);\">{{payload}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1710,"y":400,"wires":[["4f44a3ae.49e01c"]]},{"id":"6922d16b.75946","type":"function","z":"9fe9dc8a.5b72e","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":460,"wires":[["82e6ff40.f634d"]]},{"id":"82e6ff40.f634d","type":"join","z":"9fe9dc8a.5b72e","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":750,"y":420,"wires":[["321ddc39.18dc64"]]},{"id":"a9091e05.a7a93","type":"delay","z":"9fe9dc8a.5b72e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1400,"y":400,"wires":[["70ccd55f.51677c"]]},{"id":"c1f1bcc9.c62c9","type":"ui_template","z":"9fe9dc8a.5b72e","group":"4808d99f.8982c8","name":"Data-table","order":3,"width":"24","height":"14","format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/incrementfasta\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">INCREMENT FASTA FILE</font><br /></div>\n    <p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Fasta File:&emsp;</label>\n      <input id=\"file-input-fasta\" type=\"file\" name=\"file\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":170,"y":360,"wires":[[]]},{"id":"242af0d9.e8993","type":"fs-ops-delete","z":"9fe9dc8a.5b72e","name":"Delete Fasta","path":"","pathType":"str","filename":"payload.fasta","filenameType":"msg","x":1110,"y":520,"wires":[[]]},{"id":"9f3980d2.e801e","type":"change","z":"9fe9dc8a.5b72e","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1220,"y":340,"wires":[["8ba6ee8f.f58c9"]]},{"id":"8ba6ee8f.f58c9","type":"ui_toast","z":"9fe9dc8a.5b72e","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1410,"y":340,"wires":[[]]},{"id":"fce4b1de.c11a9","type":"zip_folder","z":"9fe9dc8a.5b72e","name":"","pathIn":"","pathOut":"","x":1400,"y":460,"wires":[["af0404d2.6dbb48"]]},{"id":"d0178a1a.877eb8","type":"template","z":"9fe9dc8a.5b72e","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1710,"y":460,"wires":[["4f44a3ae.49e01c"]]},{"id":"af0404d2.6dbb48","type":"delay","z":"9fe9dc8a.5b72e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1560,"y":460,"wires":[["d0178a1a.877eb8"]]},{"id":"3183b6b3.af71ea","type":"ui_text","z":"9fe9dc8a.5b72e","group":"979b5f31.ef2a","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":170,"y":480,"wires":[]},{"id":"10981fc1.3d3d1","type":"delay","z":"9fe9dc8a.5b72e","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1400,"y":520,"wires":[["b1d0044d.2a72b8"]]},{"id":"b1d0044d.2a72b8","type":"template","z":"9fe9dc8a.5b72e","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1710,"y":520,"wires":[["4f44a3ae.49e01c"]]},{"id":"4808d99f.8982c8","type":"ui_group","z":"","name":"IncrementFasta","tab":"ed3d38de.22ee28","order":1,"disp":false,"width":"32","collapse":false},{"id":"979b5f31.ef2a","type":"ui_group","z":"","name":"AuthMessage","tab":"ed3d38de.22ee28","order":2,"disp":false,"width":"27","collapse":false},{"id":"ed3d38de.22ee28","type":"ui_tab","z":"","name":"IncrementFasta","icon":"dashboard","order":6,"disabled":false,"hidden":false}]
```
#### Extract Intron from Cuff

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/ExtractFromCuff.PNG)

```json
[{"id":"40261d3d.1ed334","type":"tab","label":"Form-Extract-Intron-Cuff","disabled":false,"info":""},{"id":"b120cdcf.7eb51","type":"http in","z":"40261d3d.1ed334","name":"","url":"/extractfromcuff","method":"post","upload":true,"swaggerDoc":"","x":180,"y":320,"wires":[["27571f47.2becb","7c53ec49.67c674"]]},{"id":"27571f47.2becb","type":"function","z":"40261d3d.1ed334","name":"","func":"//msg.name = msg.req.files[0].originalname;\nglobal.set(\"name\",msg.payload.outputname);\n\nvar msg1 = { payload: msg.req.files[1].buffer, filename: \"extractFromCUFF/out/\" + msg.req.files[1].originalname};\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"extractFromCUFF/out/\" + msg.req.files[0].originalname\n\nreturn [msg,msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":380,"wires":[["6a1d2ff.e73bcd"],["6121918e.f42f4"]]},{"id":"5e801f92.908c3","type":"http response","z":"40261d3d.1ed334","name":"","statusCode":"","headers":{},"x":2070,"y":320,"wires":[]},{"id":"6a1d2ff.e73bcd","type":"file","z":"40261d3d.1ed334","name":"fasta","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":490,"y":320,"wires":[["bae6938a.6c431"]]},{"id":"7c53ec49.67c674","type":"function","z":"40261d3d.1ed334","name":"","func":"//global.set(\"name\",msg.payload.outputname);\nmsg.payload.fasta = \"extractFromCUFF/out/\" + msg.req.files[0].originalname\nmsg.payload.cuff = \"extractFromCUFF/out/\" + msg.req.files[1].originalname\nmsg.payload.pathfolder = \"extractFromCUFF/out\"\nmsg.payload.flanking = msg.payload.flanking\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":260,"wires":[["2f76501a.d9fbd"]]},{"id":"c5a1405.09ae9c","type":"ui_template","z":"40261d3d.1ed334","group":"359677f.e0f6a88","name":"Data-table","order":1,"width":24,"height":14,"format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/extractfromcuff\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">EXTRACT INTRON FROM CUFF</font><br /></div>\n    <br><p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Fasta File:&emsp;</label>\n      <input id=\"file-input-fasta3\" type=\"file\" name=\"filefasta\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"filecuff\">CUFF File:&emsp;</label>\n      <input id=\"file-input-cuff\" type=\"file\" name=\"filecuff\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".gtf\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"flanking\">Flanking:&emsp;</label>\n      <input type=\"text\" name=\"flanking\" style=\"width: 200px; height: 20px\"/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":170,"y":260,"wires":[[]]},{"id":"6121918e.f42f4","type":"file","z":"40261d3d.1ed334","name":"CUFF","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":490,"y":440,"wires":[["2e5bab78.67e854"]]},{"id":"72f19093.8adc6","type":"ui_toast","z":"40261d3d.1ed334","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1350,"y":140,"wires":[[]]},{"id":"2f76501a.d9fbd","type":"join","z":"40261d3d.1ed334","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":300,"wires":[["a5ca7387.3d7d9"]]},{"id":"bae6938a.6c431","type":"function","z":"40261d3d.1ed334","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":320,"wires":[["2f76501a.d9fbd"]]},{"id":"2e5bab78.67e854","type":"function","z":"40261d3d.1ed334","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":440,"wires":[["2f76501a.d9fbd"]]},{"id":"a5ca7387.3d7d9","type":"extract_intron_from_cuff_gtf","z":"40261d3d.1ed334","name":"","fasta":"","cuff":"","pathfolder":"","outputname":"","flanking":"","x":950,"y":220,"wires":[["25b37daa.e7c9d2","660c8ae2.49df84","3d09a500.4f9d7c","5dbbbdf4.9d66a4"]]},{"id":"25b37daa.e7c9d2","type":"function","z":"40261d3d.1ed334","name":"","func":"var name = global.get(\"name\");\n\nif(msg.payload.stdout!==\"Error\") {\nif(msg.payload.zip===\"no\") {\n    if(msg.payload.stdout!==\"Error\" && msg.payload.flanking===\"\") {\n        msg.payload = {\n            fasta : name,\n            fastaPlus : name + \"Plus\"\n        }\n        return [msg,null,null,null];\n    }\n    else if(msg.payload.stdout!==\"Error\" && msg.payload.flanking!==\"\"){\n        msg.filename = name+\"Plus\"\n        msg.payload = {\n            fasta : name,\n            fastaPlus : name+\"Plus\",\n            flDx : \"flanking_Dx_\" + name,\n            flDxPlus : \"flanking_Dx_\" + name + \"Plus\",\n            flSx : \"flanking_Sx_\" + name,\n            flSxPlus : \"flanking_Sx_\" + name + \"Plus\",\n            flTot: \"flanking_tot_\" + name,\n            flTotPlus : \"flanking_tot_\" + name + \"Plus\"\n        }\n        return [null,msg,null,null];\n    }\n}\nelse if(msg.payload.zip===\"yes\") {\n    msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n    msg.payload.pathIn = \"extractFromCUFF/out\"\n    msg.payload.pathOut = \"extractFromCUFF/\"+msg.payload.outputname\n    return [null,null,msg,null]\n}\n}\nelse {\n    return [null,null,null,msg]\n}","outputs":4,"noerr":0,"initialize":"","finalize":"","x":1180,"y":280,"wires":[["1cb703da.f962cc"],["ff318d8c.6cad6"],["52213520.77b49c"],["6ddb6122.d3b43"]]},{"id":"1cb703da.f962cc","type":"delay","z":"40261d3d.1ed334","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1380,"y":220,"wires":[["45d6998b.fecf98"]]},{"id":"ff318d8c.6cad6","type":"delay","z":"40261d3d.1ed334","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1380,"y":280,"wires":[["7f45073a.08ac18"]]},{"id":"7f45073a.08ac18","type":"template","z":"40261d3d.1ed334","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromCUFF/out/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flDx}}\" onclick=\"clickAndDisable(this);\">{{payload.flDx}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flDxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flDxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flSx}}\" onclick=\"clickAndDisable(this);\">{{payload.flSx}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flSxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flSxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flTot}}\" onclick=\"clickAndDisable(this);\">{{payload.flTot}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.flTotPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flTotPlus}}</a> <br><br>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1750,"y":280,"wires":[["5e801f92.908c3"]]},{"id":"45d6998b.fecf98","type":"template","z":"40261d3d.1ed334","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromCUFF/out/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromCUFF/out/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1750,"y":220,"wires":[["5e801f92.908c3"]]},{"id":"7960cc31.0aa3d4","type":"ui_text","z":"40261d3d.1ed334","group":"c8831f06.a2221","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":170,"y":380,"wires":[]},{"id":"660c8ae2.49df84","type":"fs-ops-delete","z":"40261d3d.1ed334","name":"Delete Fasta","path":"","pathType":"str","filename":"payload.fasta","filenameType":"msg","x":1090,"y":400,"wires":[[]]},{"id":"3d09a500.4f9d7c","type":"fs-ops-delete","z":"40261d3d.1ed334","name":"Delete Cuff","path":"","pathType":"str","filename":"payload.cuff","filenameType":"msg","x":1070,"y":460,"wires":[[]]},{"id":"5dbbbdf4.9d66a4","type":"change","z":"40261d3d.1ed334","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":140,"wires":[["72f19093.8adc6"]]},{"id":"52213520.77b49c","type":"zip_folder","z":"40261d3d.1ed334","name":"","pathIn":"","pathOut":"","x":1380,"y":340,"wires":[["9d8e6c49.d48d9"]]},{"id":"9d8e6c49.d48d9","type":"delay","z":"40261d3d.1ed334","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1560,"y":340,"wires":[["e756be52.0bab2"]]},{"id":"e756be52.0bab2","type":"template","z":"40261d3d.1ed334","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1750,"y":340,"wires":[["5e801f92.908c3"]]},{"id":"6ddb6122.d3b43","type":"delay","z":"40261d3d.1ed334","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1380,"y":400,"wires":[["f477c4e1.ae36c8"]]},{"id":"f477c4e1.ae36c8","type":"template","z":"40261d3d.1ed334","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1750,"y":400,"wires":[["5e801f92.908c3"]]},{"id":"359677f.e0f6a88","type":"ui_group","z":"","name":"ExtractFromCUFF","tab":"159fc757.80d0d9","order":2,"disp":false,"width":"27","collapse":false},{"id":"c8831f06.a2221","type":"ui_group","z":"","name":"AuthMessage","tab":"159fc757.80d0d9","order":2,"disp":false,"width":"27","collapse":false},{"id":"159fc757.80d0d9","type":"ui_tab","z":"","name":"ExtractFromCUFF","icon":"dashboard","order":7,"disabled":false,"hidden":false}]
```
#### Extract Intron from Topat

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/ExtractFromTopat.PNG)

```json
[{"id":"77879970.645d68","type":"tab","label":"Form-Extract-From-Topat","disabled":false,"info":""},{"id":"3bc067eb.4775c8","type":"http in","z":"77879970.645d68","name":"","url":"/extractintronfromtopat","method":"post","upload":true,"swaggerDoc":"","x":300,"y":360,"wires":[["a37a97de.d72448","8d89395f.a61288"]]},{"id":"a37a97de.d72448","type":"function","z":"77879970.645d68","name":"","func":"//msg.name = msg.req.files[0].originalname;\n//global.set(\"name\",msg.payload.outputname);\n//global.set(\"flanking\",msg.payload.flanking);\n\nvar msg1 = { payload: msg.req.files[1].buffer, filename: \"extractFromTopat/out/\" + msg.req.files[1].originalname};\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"extractFromTopat/out/\" + msg.req.files[0].originalname\n\nreturn [msg,msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":480,"y":420,"wires":[["fe23cf02.d677b"],["9d5ca752.3ff4c8"]]},{"id":"dc332a89.36fa68","type":"http response","z":"77879970.645d68","name":"","statusCode":"","headers":{},"x":2230,"y":260,"wires":[]},{"id":"fe23cf02.d677b","type":"file","z":"77879970.645d68","name":"fasta","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":610,"y":360,"wires":[["c5c21fe0.6af74"]]},{"id":"8d89395f.a61288","type":"function","z":"77879970.645d68","name":"","func":"msg.payload.fasta = \"extractFromTopat/out/\" + msg.req.files[0].originalname\nmsg.payload.tp = \"extractFromTopat/out/\" + msg.req.files[1].originalname\nmsg.payload.pathfolder = \"extractFromTopat/out\"\nmsg.payload.flanking = msg.payload.flanking\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":760,"y":300,"wires":[["ede92c8b.759ff"]]},{"id":"5d40c25e.76db1c","type":"template","z":"77879970.645d68","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromTopat/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1950,"y":160,"wires":[["dc332a89.36fa68"]]},{"id":"68f2d771.0d9528","type":"ui_template","z":"77879970.645d68","group":"eebecb08.3f4318","name":"Data-table","order":1,"width":24,"height":14,"format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/extractintronfromtopat\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">EXTRACT INTRON FROM TOPAT</font><br /></div>\n    <br><p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Fasta File:&emsp;</label>\n      <input id=\"file-input-fasta2\" type=\"file\" name=\"filefasta\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Topat File:&emsp;</label>\n      <input id=\"file-input-topat\" type=\"file\" name=\"filetopat\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".gtf\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"flanking\">Flanking:&emsp;</label>\n      <input type=\"text\" name=\"flanking\" style=\"width: 200px; height: 20px\"/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":290,"y":300,"wires":[[]]},{"id":"9d5ca752.3ff4c8","type":"file","z":"77879970.645d68","name":"topat","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":610,"y":480,"wires":[["9523ef7a.7c6c7"]]},{"id":"2fd3bafa.a35ca6","type":"function","z":"77879970.645d68","name":"","func":"var name = msg.payload.outputname;\n\nif(msg.payload.stdout!==\"Error\") {\n    if(msg.payload.zip===\"no\") {\n        if(msg.payload.stdout!==\"Error\" && msg.payload.flanking===\"\") {\n            msg.payload = {\n                fasta : name,\n                fastaPlus : name + \"Plus\"\n            }\n            return [msg,null,null,null];\n        }\n        else if(msg.payload.stdout!==\"Error\" && msg.payload.flanking!==\"\"){\n            msg.filename = name+\"Plus\"\n            msg.payload = {\n                fasta : name,\n                fastaPlus : name+\"Plus\",\n                flDx : \"flanking_Dx_IR_\" + name,\n                flDxPlus : \"flanking_Dx_IR_\" + name + \"Plus\",\n                flSx : \"flanking_Sx_IR_\" + name,\n                flSxPlus : \"flanking_Sx_IR_\" + name + \"Plus\",\n                flIr: \"flanking_IR_\" + name,\n                flIrPlus : \"flanking_IR_\" + name + \"Plus\"\n            }\n            return [null,msg,null,null];\n        }\n    }\n    else if(msg.payload.zip===\"yes\") {\n        msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n        msg.payload.pathIn = \"extractFromTopat/out\"\n        msg.payload.pathOut = \"extractFromTopat/\"+msg.payload.outputname\n        return [null,null,msg,null]\n    }\n}\nelse {\n    return[null,null,null,msg]\n}","outputs":4,"noerr":0,"initialize":"","finalize":"","x":1420,"y":240,"wires":[["d833750f.3e1ef8"],["6cc679de.e29f38"],["68545af1.366514"],["1e3c79e4.ca2376"]]},{"id":"d833750f.3e1ef8","type":"delay","z":"77879970.645d68","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1640,"y":160,"wires":[["5d40c25e.76db1c"]]},{"id":"ede92c8b.759ff","type":"join","z":"77879970.645d68","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":970,"y":340,"wires":[["e059b4ac.5beeb8"]]},{"id":"c5c21fe0.6af74","type":"function","z":"77879970.645d68","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":760,"y":360,"wires":[["ede92c8b.759ff"]]},{"id":"9523ef7a.7c6c7","type":"function","z":"77879970.645d68","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":760,"y":480,"wires":[["ede92c8b.759ff"]]},{"id":"6cc679de.e29f38","type":"delay","z":"77879970.645d68","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1640,"y":220,"wires":[["ffb84408.d6f378"]]},{"id":"ffb84408.d6f378","type":"template","z":"77879970.645d68","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromTopat/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flDx}}\" onclick=\"clickAndDisable(this);\">{{payload.flDx}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flDxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flDxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flSx}}\" onclick=\"clickAndDisable(this);\">{{payload.flSx}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flSxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flSxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flIr}}\" onclick=\"clickAndDisable(this);\">{{payload.flIr}}</a> <br><br>\n    <a href=\"/file/extractFromTopat/{{payload.flIrPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flIrPlus}}</a> <br><br>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1950,"y":220,"wires":[["dc332a89.36fa68"]]},{"id":"d7991ca6.ca237","type":"ui_text","z":"77879970.645d68","group":"da1179ed.deb7a8","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":290,"y":420,"wires":[]},{"id":"e504388.1cf64c8","type":"fs-ops-delete","z":"77879970.645d68","name":"Delete Topat","path":"","pathType":"str","filename":"payload.tp","filenameType":"msg","x":1230,"y":360,"wires":[[]]},{"id":"6c2e3fef.ae8ba","type":"fs-ops-delete","z":"77879970.645d68","name":"Delete Fasta","path":"","pathType":"str","filename":"payload.fasta","filenameType":"msg","x":1250,"y":300,"wires":[[]]},{"id":"b5c7017c.e2738","type":"change","z":"77879970.645d68","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1400,"y":100,"wires":[["9ee84299.7531a"]]},{"id":"9ee84299.7531a","type":"ui_toast","z":"77879970.645d68","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1610,"y":100,"wires":[[]]},{"id":"68545af1.366514","type":"zip_folder","z":"77879970.645d68","name":"","pathIn":"","pathOut":"","x":1640,"y":280,"wires":[["81c8e8d0.69efd8"]]},{"id":"81c8e8d0.69efd8","type":"delay","z":"77879970.645d68","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1800,"y":280,"wires":[["4c4eaf4c.58848"]]},{"id":"4c4eaf4c.58848","type":"template","z":"77879970.645d68","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1950,"y":280,"wires":[["dc332a89.36fa68"]]},{"id":"e059b4ac.5beeb8","type":"extract_intron_using_bed_file_from_topat","z":"77879970.645d68","name":"","fasta":"","tp":"","pathfolder":"","outputname":"","flanking":"","x":1060,"y":180,"wires":[["b5c7017c.e2738","2fd3bafa.a35ca6","6c2e3fef.ae8ba","e504388.1cf64c8"]]},{"id":"1e3c79e4.ca2376","type":"delay","z":"77879970.645d68","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1640,"y":340,"wires":[["44db07af.507178"]]},{"id":"44db07af.507178","type":"template","z":"77879970.645d68","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1950,"y":340,"wires":[["dc332a89.36fa68"]]},{"id":"eebecb08.3f4318","type":"ui_group","z":"","name":"ExtractFromTopat","tab":"230231d6.efa81e","order":1,"disp":false,"width":"27","collapse":false},{"id":"da1179ed.deb7a8","type":"ui_group","z":"","name":"AuthMessage","tab":"230231d6.efa81e","order":2,"disp":false,"width":"27","collapse":false},{"id":"230231d6.efa81e","type":"ui_tab","z":"","name":"ExtractFromTopat","icon":"dashboard","order":8,"disabled":false,"hidden":false}]
```
#### Remove Contig From Fasta

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/RemoveContingFromFasta.PNG) 

```json
[{"id":"618eb36e.cbbf0c","type":"tab","label":"Form-Remove-Contig-From-Fasta","disabled":false,"info":""},{"id":"3209b802.d9a058","type":"http in","z":"618eb36e.cbbf0c","name":"","url":"/removecontingfasta","method":"post","upload":true,"swaggerDoc":"","x":190,"y":220,"wires":[["66cec88b.7f4658","ab1c9c99.ff7c7"]]},{"id":"66cec88b.7f4658","type":"function","z":"618eb36e.cbbf0c","name":"","func":"//msg.name = msg.req.files[0].originalname;\n//global.set(\"name\",msg.req.files[0].originalname);\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"removeFromFasta/out/\" + msg.req.files[0].originalname\nvar msg1 = { payload: msg.req.files[1].buffer, filename: \"removeFromFasta/out/\" + msg.req.files[1].originalname};\nreturn [msg,msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":280,"wires":[["d23f8302.3c463"],["9840c4ac.a9a068"]]},{"id":"35f620c3.2cfe4","type":"http response","z":"618eb36e.cbbf0c","name":"","statusCode":"","headers":{},"x":1990,"y":260,"wires":[]},{"id":"d23f8302.3c463","type":"file","z":"618eb36e.cbbf0c","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":510,"y":260,"wires":[["e7c09734.4e0cc8"]]},{"id":"ab1c9c99.ff7c7","type":"function","z":"618eb36e.cbbf0c","name":"","func":"//global.set(\"name\",msg.payload.outputname);\n\nmsg.payload.fasta1 = \"removeFromFasta/out/\" + msg.req.files[0].originalname\nmsg.payload.fasta2 = \"removeFromFasta/out/\" + msg.req.files[1].originalname\nmsg.payload.pathfolder = \"removeFromFasta/out\"\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":500,"y":140,"wires":[["b144b0d.f5b275"]]},{"id":"178eb6de.439d39","type":"function","z":"618eb36e.cbbf0c","name":"","func":"//var name = global.get(\"name\");\nif(msg.payload.stdout!==\"Error\") {\n    if(msg.payload.zip===\"no\") {\n        msg.payload = msg.payload.outputname\n        return[msg,null,null]\n    }\n    else if(msg.payload.zip===\"yes\") {\n        msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n        msg.payload.pathIn = \"removeFromFasta/out\"\n        msg.payload.pathOut = \"removeFromFasta/\"+msg.payload.outputname\n        return [null,msg,null]\n    }\n}\nelse {\n    return [null,null,msg]\n}\n","outputs":3,"noerr":0,"initialize":"","finalize":"","x":1220,"y":220,"wires":[["aa79328d.b0b88"],["316e2e9a.182562"],["9fec4fb9.d391e"]]},{"id":"6a54f9ae.22c648","type":"template","z":"618eb36e.cbbf0c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/removeFromFasta/out/{{payload}}\" onclick=\"clickAndDisable(this);\">{{payload}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1590,"y":200,"wires":[["35f620c3.2cfe4"]]},{"id":"e7c09734.4e0cc8","type":"function","z":"618eb36e.cbbf0c","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":260,"wires":[["b144b0d.f5b275"]]},{"id":"b144b0d.f5b275","type":"join","z":"618eb36e.cbbf0c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":240,"wires":[["8b039dbe.068d8"]]},{"id":"aa79328d.b0b88","type":"delay","z":"618eb36e.cbbf0c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1420,"y":200,"wires":[["6a54f9ae.22c648"]]},{"id":"5067b3e2.c4ce3c","type":"ui_template","z":"618eb36e.cbbf0c","group":"67710136.09c61","name":"Data-table","order":3,"width":"24","height":"14","format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/removecontingfasta\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">REMOVE CONTING FROM FASTA</font><br /></div>\n    <p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta1\">Fasta File 1:&emsp;</label>\n      <input id=\"file-input-fasta1\" type=\"file\" name=\"file\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"fasta2\">Fasta File 2:&emsp;</label>\n      <input id=\"file-input-fasta2\" type=\"file\" name=\"file2\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":190,"y":160,"wires":[[]]},{"id":"6a4c1521.3b868c","type":"fs-ops-delete","z":"618eb36e.cbbf0c","name":"Delete Fasta1","path":"","pathType":"str","filename":"payload.fasta1","filenameType":"msg","x":1140,"y":320,"wires":[[]]},{"id":"316e2e9a.182562","type":"zip_folder","z":"618eb36e.cbbf0c","name":"","pathIn":"","pathOut":"","x":1420,"y":260,"wires":[["18f8fd01.9176c3"]]},{"id":"a9c3a802.9121f8","type":"template","z":"618eb36e.cbbf0c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1730,"y":260,"wires":[["35f620c3.2cfe4"]]},{"id":"18f8fd01.9176c3","type":"delay","z":"618eb36e.cbbf0c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1580,"y":260,"wires":[["a9c3a802.9121f8"]]},{"id":"10a8b144.16d0ff","type":"ui_text","z":"618eb36e.cbbf0c","group":"35c9da15.fa77f6","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":190,"y":280,"wires":[]},{"id":"4563ce9b.21aa1","type":"fs-ops-delete","z":"618eb36e.cbbf0c","name":"Delete Fasta2","path":"","pathType":"str","filename":"payload.fasta2","filenameType":"msg","x":1100,"y":380,"wires":[[]]},{"id":"8b039dbe.068d8","type":"remove_conting_from_fasta","z":"618eb36e.cbbf0c","name":"","fasta1":"","fasta2":"","pathfolder":"","outputname":"","x":1000,"y":220,"wires":[["178eb6de.439d39","6a4c1521.3b868c","4563ce9b.21aa1","9b8244a3.e84868"]]},{"id":"9840c4ac.a9a068","type":"file","z":"618eb36e.cbbf0c","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":510,"y":320,"wires":[["db151590.d174e8"]]},{"id":"db151590.d174e8","type":"function","z":"618eb36e.cbbf0c","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":320,"wires":[["b144b0d.f5b275"]]},{"id":"9fec4fb9.d391e","type":"delay","z":"618eb36e.cbbf0c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1420,"y":320,"wires":[["da8a173d.0c5478"]]},{"id":"da8a173d.0c5478","type":"template","z":"618eb36e.cbbf0c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1570,"y":320,"wires":[["35f620c3.2cfe4"]]},{"id":"9b8244a3.e84868","type":"change","z":"618eb36e.cbbf0c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":120,"wires":[["568a183a.22fc88"]]},{"id":"568a183a.22fc88","type":"ui_toast","z":"618eb36e.cbbf0c","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1430,"y":120,"wires":[[]]},{"id":"67710136.09c61","type":"ui_group","z":"","name":"RemoveFromFasta","tab":"fdafc552.df9028","order":1,"disp":false,"width":"27","collapse":false},{"id":"35c9da15.fa77f6","type":"ui_group","z":"","name":"AuthMessage","tab":"fdafc552.df9028","order":2,"disp":false,"width":"27","collapse":false},{"id":"fdafc552.df9028","type":"ui_tab","z":"","name":"RemoveFromFasta","icon":"dashboard","order":9,"disabled":false,"hidden":false}]
```
#### Merge Fasta

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/MergeFastas.PNG) 

```json
[{"id":"54786150.1490a","type":"tab","label":"Form-Merge-Fasta","disabled":false,"info":""},{"id":"5b1bcd01.4d0fd4","type":"http in","z":"54786150.1490a","name":"","url":"/mergefasta","method":"post","upload":true,"swaggerDoc":"","x":170,"y":300,"wires":[["e9d4c67c.0795f8","97bd051a.061c48"]]},{"id":"e9d4c67c.0795f8","type":"function","z":"54786150.1490a","name":"","func":"//msg.name = msg.req.files[0].originalname;\n//global.set(\"name\",msg.req.files[0].originalname);\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"mergeFasta/out/\" + msg.req.files[0].originalname\nvar msg1 = { payload: msg.req.files[1].buffer, filename: \"mergeFasta/out/\" + msg.req.files[1].originalname};\nreturn [msg,msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":360,"y":360,"wires":[["55ce07e5.f91578"],["d10b1865.12bb58"]]},{"id":"4ebde3f9.96a5cc","type":"http response","z":"54786150.1490a","name":"","statusCode":"","headers":{},"x":1990,"y":340,"wires":[]},{"id":"55ce07e5.f91578","type":"file","z":"54786150.1490a","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":510,"y":340,"wires":[["6175f65c.416128"]]},{"id":"97bd051a.061c48","type":"function","z":"54786150.1490a","name":"","func":"//global.set(\"name\",msg.payload.outputname);\n\nmsg.payload.fasta1 = \"mergeFasta/out/\" + msg.req.files[0].originalname\nmsg.payload.fasta2 = \"mergeFasta/out/\" + msg.req.files[1].originalname\nmsg.payload.pathfolder = \"mergeFasta/out\"\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":500,"y":220,"wires":[["eab08603.1c0048"]]},{"id":"c6e2e609.5c28e8","type":"function","z":"54786150.1490a","name":"","func":"//var name = global.get(\"name\");\nif(msg.payload.stdout!==\"Error\") {\n    if(msg.payload.zip===\"no\") {\n        msg.payload = msg.payload.outputname\n        return[msg,null,null]\n    }\n    else if(msg.payload.zip===\"yes\") {\n        msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n        msg.payload.pathIn = \"mergeFasta/out\"\n        msg.payload.pathOut = \"mergeFasta/\"+msg.payload.outputname\n        return [null,msg,null]\n    }\n}\nelse {\n    return [null,null,msg]\n}\n","outputs":3,"noerr":0,"initialize":"","finalize":"","x":1220,"y":300,"wires":[["c448b69f.56bd78"],["f0e8f8ae.743d08"],["66830c69.17e574"]]},{"id":"8a465db6.a8e61","type":"template","z":"54786150.1490a","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/mergeFasta/out/{{payload}}\" onclick=\"clickAndDisable(this);\">{{payload}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1590,"y":280,"wires":[["4ebde3f9.96a5cc"]]},{"id":"6175f65c.416128","type":"function","z":"54786150.1490a","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":340,"wires":[["eab08603.1c0048"]]},{"id":"eab08603.1c0048","type":"join","z":"54786150.1490a","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":810,"y":320,"wires":[["af5f8fef.b46de"]]},{"id":"c448b69f.56bd78","type":"delay","z":"54786150.1490a","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1420,"y":280,"wires":[["8a465db6.a8e61"]]},{"id":"345f9e36.1b1422","type":"ui_template","z":"54786150.1490a","group":"12604437.f7dd5c","name":"Data-table","order":3,"width":"24","height":"14","format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/mergefasta\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">MERGE FASTA</font><br /></div>\n    <p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta1\">Fasta File 1:&emsp;</label>\n      <input id=\"file-input-fasta1\" type=\"file\" name=\"file\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"fasta2\">Fasta File 2:&emsp;</label>\n      <input id=\"file-input-fasta2\" type=\"file\" name=\"file2\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":190,"y":240,"wires":[[]]},{"id":"a5a3b2ab.c4205","type":"fs-ops-delete","z":"54786150.1490a","name":"Delete Fasta1","path":"","pathType":"str","filename":"payload.fasta1","filenameType":"msg","x":1160,"y":400,"wires":[[]]},{"id":"41939ba1.9e6c34","type":"change","z":"54786150.1490a","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1240,"y":180,"wires":[["57397566.bb234c"]]},{"id":"57397566.bb234c","type":"ui_toast","z":"54786150.1490a","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1430,"y":180,"wires":[[]]},{"id":"f0e8f8ae.743d08","type":"zip_folder","z":"54786150.1490a","name":"","pathIn":"","pathOut":"","x":1420,"y":340,"wires":[["a05e2518.564ae8"]]},{"id":"db4d9cd2.e5d6a","type":"template","z":"54786150.1490a","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1730,"y":340,"wires":[["4ebde3f9.96a5cc"]]},{"id":"a05e2518.564ae8","type":"delay","z":"54786150.1490a","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1580,"y":340,"wires":[["db4d9cd2.e5d6a"]]},{"id":"d2911f53.32a54","type":"ui_text","z":"54786150.1490a","group":"c112becb.28eaf","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":190,"y":360,"wires":[]},{"id":"2ab12ab1.d1a216","type":"fs-ops-delete","z":"54786150.1490a","name":"Delete Fasta2","path":"","pathType":"str","filename":"payload.fasta2","filenameType":"msg","x":1100,"y":460,"wires":[[]]},{"id":"d10b1865.12bb58","type":"file","z":"54786150.1490a","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":510,"y":400,"wires":[["83b70937.6bc3b8"]]},{"id":"83b70937.6bc3b8","type":"function","z":"54786150.1490a","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":640,"y":400,"wires":[["eab08603.1c0048"]]},{"id":"66830c69.17e574","type":"delay","z":"54786150.1490a","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1420,"y":400,"wires":[["fcd12833.cdeea8"]]},{"id":"fcd12833.cdeea8","type":"template","z":"54786150.1490a","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1570,"y":400,"wires":[["4ebde3f9.96a5cc"]]},{"id":"af5f8fef.b46de","type":"merge_fasta","z":"54786150.1490a","name":"","fasta1":"","fasta2":"","pathfolder":"","outputname":"","x":980,"y":300,"wires":[["41939ba1.9e6c34","c6e2e609.5c28e8","a5a3b2ab.c4205","2ab12ab1.d1a216"]]},{"id":"12604437.f7dd5c","type":"ui_group","z":"","name":"MergeFasta","tab":"268bbc91.5d0b04","order":1,"disp":false,"width":"27","collapse":false},{"id":"c112becb.28eaf","type":"ui_group","z":"","name":"AuthMessage","tab":"268bbc91.5d0b04","order":2,"disp":false,"width":"27","collapse":false},{"id":"268bbc91.5d0b04","type":"ui_tab","z":"","name":"MergeFasta","icon":"dashboard","order":10,"disabled":false,"hidden":false}]
```
#### Remove Nucleotides

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/RemoveNucleotides.PNG) 

```json
[{"id":"f28db1c7.5937d","type":"tab","label":"Form-Remove-Nucleotides","disabled":false,"info":""},{"id":"33468cab.64bd34","type":"http in","z":"f28db1c7.5937d","name":"","url":"/removenucleotides","method":"post","upload":true,"swaggerDoc":"","x":150,"y":240,"wires":[["b8d2b4d3.060f58","74f9f3c6.22befc"]]},{"id":"b8d2b4d3.060f58","type":"function","z":"f28db1c7.5937d","name":"","func":"//msg.name = msg.req.files[0].originalname;\n//global.set(\"name\",msg.req.files[0].originalname);\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"removeNucleotides/out/\" + msg.req.files[0].originalname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":320,"y":300,"wires":[["6c88185e.555aa8"]]},{"id":"faba7ce2.61487","type":"http response","z":"f28db1c7.5937d","name":"","statusCode":"","headers":{},"x":1950,"y":280,"wires":[]},{"id":"6c88185e.555aa8","type":"file","z":"f28db1c7.5937d","name":"","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":470,"y":300,"wires":[["6728dc32.8de7d4"]]},{"id":"74f9f3c6.22befc","type":"function","z":"f28db1c7.5937d","name":"","func":"//global.set(\"name\",msg.payload.outputname);\n\nmsg.payload.fasta = \"removeNucleotides/out/\" + msg.req.files[0].originalname\nmsg.payload.n = msg.payload.n\nmsg.payload.pathfolder = \"removeNucleotides/out\"\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":460,"y":160,"wires":[["f2090e59.23913"]]},{"id":"c6791bbc.4b7ee8","type":"function","z":"f28db1c7.5937d","name":"","func":"//var name = global.get(\"name\");\nif(msg.payload.stdout!==\"Error\") {\n    if(msg.payload.zip===\"no\") {\n        msg.payload = msg.payload.outputname\n        return[msg,null,null]\n    }\n    else if(msg.payload.zip===\"yes\") {\n        msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n        msg.payload.pathIn = \"removeNucleotides/out\"\n        msg.payload.pathOut = \"removeNucleotides/\"+msg.payload.outputname\n        return [null,msg,null]\n    }\n}\nelse {\n    return [null,null,msg]\n}\n","outputs":3,"noerr":0,"initialize":"","finalize":"","x":1160,"y":260,"wires":[["3a054d5f.0fa5e2"],["190bc48e.ceb41b"],["1018bd72.767e33"]]},{"id":"b9ab7016.9dd6c","type":"template","z":"f28db1c7.5937d","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/removeNucleotides/out/flanking_Dx_{{payload}}\" onclick=\"clickAndDisable(this);\">flanking_Dx_{{payload}}</a> <br><br>\n    <a href=\"/file/removeNucleotides/out/flanking_Sx_{{payload}}\" onclick=\"clickAndDisable(this);\">flanking_Sx_{{payload}}</a> <br><br>\n    <a href=\"/file/removeNucleotides/out/no_flanking_{{payload}}\" onclick=\"clickAndDisable(this);\">no_flanking_{{payload}}</a> <br><br>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1550,"y":220,"wires":[["faba7ce2.61487"]]},{"id":"6728dc32.8de7d4","type":"function","z":"f28db1c7.5937d","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":600,"y":300,"wires":[["f2090e59.23913"]]},{"id":"f2090e59.23913","type":"join","z":"f28db1c7.5937d","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":770,"y":260,"wires":[["e6bf0ecb.6a5af"]]},{"id":"3a054d5f.0fa5e2","type":"delay","z":"f28db1c7.5937d","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1380,"y":220,"wires":[["b9ab7016.9dd6c"]]},{"id":"3dee95ec.87772a","type":"ui_template","z":"f28db1c7.5937d","group":"e164d591.d12eb8","name":"Data-table","order":3,"width":"24","height":"14","format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/removenucleotides\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">REMOVE NUCLEOTIDES</font><br /></div>\n    <p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Fasta File:&emsp;</label>\n      <input id=\"file-input-fasta\" type=\"file\" name=\"file\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"fasta2\">Number of Nucleotides to remove:&emsp;</label>\n      <input type=\"text\" name=\"n\" style=\"width: 200px; height: 20px\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":150,"y":180,"wires":[[]]},{"id":"a2f53d4a.9ad6c","type":"fs-ops-delete","z":"f28db1c7.5937d","name":"Delete Fasta","path":"","pathType":"str","filename":"payload.fasta","filenameType":"msg","x":1130,"y":360,"wires":[[]]},{"id":"2fb9d562.14aaea","type":"change","z":"f28db1c7.5937d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":120,"wires":[["7041e1fa.aa5d1"]]},{"id":"7041e1fa.aa5d1","type":"ui_toast","z":"f28db1c7.5937d","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1390,"y":120,"wires":[[]]},{"id":"190bc48e.ceb41b","type":"zip_folder","z":"f28db1c7.5937d","name":"","pathIn":"","pathOut":"","x":1380,"y":280,"wires":[["377dca6d.8c0746"]]},{"id":"1817cce3.a3a293","type":"template","z":"f28db1c7.5937d","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1690,"y":280,"wires":[["faba7ce2.61487"]]},{"id":"377dca6d.8c0746","type":"delay","z":"f28db1c7.5937d","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1540,"y":280,"wires":[["1817cce3.a3a293"]]},{"id":"19c27a6e.371436","type":"ui_text","z":"f28db1c7.5937d","group":"3f548f7b.306b4","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":150,"y":300,"wires":[]},{"id":"1018bd72.767e33","type":"delay","z":"f28db1c7.5937d","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1380,"y":340,"wires":[["b4a6e081.ce01d"]]},{"id":"b4a6e081.ce01d","type":"template","z":"f28db1c7.5937d","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1530,"y":340,"wires":[["faba7ce2.61487"]]},{"id":"e6bf0ecb.6a5af","type":"remove_nucleotides","z":"f28db1c7.5937d","name":"","fasta":"","n":"","pathfolder":"","outputname":"","x":960,"y":260,"wires":[["c6791bbc.4b7ee8","a2f53d4a.9ad6c","2fb9d562.14aaea"]]},{"id":"e164d591.d12eb8","type":"ui_group","z":"","name":"RemoveNucleotides","tab":"3691d90e.709346","order":1,"disp":false,"width":"27","collapse":false},{"id":"3f548f7b.306b4","type":"ui_group","z":"","name":"AuthMessage","tab":"3691d90e.709346","order":2,"disp":false,"width":"27","collapse":false},{"id":"3691d90e.709346","type":"ui_tab","z":"","name":"RemoveNucleotides","icon":"dashboard","order":11,"disabled":false,"hidden":false}]
```
#### Extract Intron From Augustus

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/ExtractFromAugustus.PNG) 

```json
[{"id":"5ee18230.15372c","type":"tab","label":"Form-Extract-From-August","disabled":false,"info":""},{"id":"d0d023bc.06eab","type":"http in","z":"5ee18230.15372c","name":"","url":"/extractfromaugustus","method":"post","upload":true,"swaggerDoc":"","x":210,"y":300,"wires":[["2e9a4a5b.9cede6","f6fc71e3.fd05f"]]},{"id":"2e9a4a5b.9cede6","type":"function","z":"5ee18230.15372c","name":"","func":"//msg.name = msg.req.files[0].originalname;\nglobal.set(\"name\",msg.payload.outputname);\n\nvar msg1 = { payload: msg.req.files[1].buffer, filename: \"extractFromAugustus/out/\" + msg.req.files[1].originalname};\nmsg.payload = msg.req.files[0].buffer\nmsg.filename = \"extractFromAugustus/out/\" + msg.req.files[0].originalname\n\nreturn [msg,msg1];","outputs":2,"noerr":0,"initialize":"","finalize":"","x":400,"y":360,"wires":[["74d00653.c35f48"],["551f2ca4.049054"]]},{"id":"73d6751b.c4f12c","type":"http response","z":"5ee18230.15372c","name":"","statusCode":"","headers":{},"x":2210,"y":300,"wires":[]},{"id":"74d00653.c35f48","type":"file","z":"5ee18230.15372c","name":"fasta","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":530,"y":300,"wires":[["7489bc5a.49be84"]]},{"id":"f6fc71e3.fd05f","type":"function","z":"5ee18230.15372c","name":"","func":"//global.set(\"name\",msg.payload.outputname);\nmsg.payload.fasta = \"extractFromAugustus/out/\" + msg.req.files[0].originalname\nmsg.payload.au = \"extractFromAugustus/out/\" + msg.req.files[1].originalname\nmsg.payload.pathfolder = \"extractFromAugustus/out\"\nmsg.payload.flanking = msg.payload.flanking\nmsg.payload.outputname = msg.payload.outputname\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":240,"wires":[["c16bb01a.d2923"]]},{"id":"f24f88e0.d52d68","type":"ui_template","z":"5ee18230.15372c","group":"81a38a69.0a5a38","name":"Data-table","order":1,"width":24,"height":14,"format":"<html>  \n  <head>\n      <style>\n.center {\n  position: absolute;\n  top: 8%;\n  left: 50%;\n  margin: -25px 0 0 -25px;\n}\n .auto-style1 {\n margin-left: 0px;\n }\n </style>\n  </head>\n  <body>\n  <center>\n \n      <br><br><br><br>\n    <form action=\"/extractfromaugustus\" method=\"post\" enctype=\"multipart/form-data\">\n    <div style=\"width:700px; height:45px; border:5px outset navy;\"> <font face=\"Verdana\" size=\"6\">EXTRACT INTRON FROM AUGUSTUS</font><br /></div>\n    <br><p>_________________________________________________________________________________________________________________</p> <br>\n      <br>\n      <label style=\"font-size:20px\"  for=\"fasta\">Fasta File:&emsp;</label>\n      <input id=\"file-input-fasta3\" type=\"file\" name=\"filefasta\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".fasta\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\"  for=\"fileaug\">AUGUSTUS File:&emsp;</label>\n      <input id=\"file-input-aug\" type=\"file\" name=\"fileaug\" class=\"auto-style1\" style=\"width: 273px; height: 34px\" accept=\".gtf\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"outputname\">Output name:&emsp;</label>\n      <input type=\"text\" name=\"outputname\" style=\"width: 200px; height: 20px\" required/>\n      <br><br><br>\n      <label style=\"font-size:20px\" for=\"flanking\">Flanking:&emsp;</label>\n      <input type=\"text\" name=\"flanking\" style=\"width: 200px; height: 20px\"/>\n      <br><br>\n      <label for=\"zip\">Want zip the output(if chose \"NO\" you can download the files individually):</label>\n      <select id=\"zip\" name=\"zip\">\n          <option value=\"yes\">YES</option>\n          <option value=\"no\">NO</option>\n          </select>\n    <p>_________________________________________________________________________________________________________________</p>\n      <br>\n      <input type=\"submit\" style=\"width: 250px; height: 43px\" />\n     \n    </form>\n    </center>\n      </body>\n</html>","storeOutMessages":false,"fwdInMessages":false,"resendOnRefresh":false,"templateScope":"local","x":190,"y":240,"wires":[[]]},{"id":"551f2ca4.049054","type":"file","z":"5ee18230.15372c","name":"CUFF","filename":"","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":530,"y":420,"wires":[["a836d03c.00d65"]]},{"id":"993d047d.42a9f8","type":"ui_toast","z":"5ee18230.15372c","position":"dialog","displayTime":"3","highlight":"","sendall":false,"outputs":1,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":1490,"y":120,"wires":[[]]},{"id":"c16bb01a.d2923","type":"join","z":"5ee18230.15372c","name":"","mode":"custom","build":"merged","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"3","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":850,"y":280,"wires":[["b78e86bc.501948"]]},{"id":"7489bc5a.49be84","type":"function","z":"5ee18230.15372c","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":300,"wires":[["c16bb01a.d2923"]]},{"id":"a836d03c.00d65","type":"function","z":"5ee18230.15372c","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":680,"y":420,"wires":[["c16bb01a.d2923"]]},{"id":"ab76e6f9.d84d98","type":"function","z":"5ee18230.15372c","name":"","func":"var name = global.get(\"name\");\n\nif(msg.payload.stdout!==\"Error\") {\nif(msg.payload.zip===\"no\") {\n    if(msg.payload.stdout!==\"Error\" && msg.payload.flanking===\"\") {\n        msg.payload = {\n            fasta : name,\n            fastaPlus : name + \"Plus\"\n        }\n        return [msg,null,null,null];\n    }\n    else if(msg.payload.stdout!==\"Error\" && msg.payload.flanking!==\"\"){\n        msg.filename = name+\"Plus\"\n        msg.payload = {\n            fasta : name,\n            fastaPlus : name+\"Plus\",\n            flDx : \"flanking_Dx_\" + name,\n            flDxPlus : \"flanking_Dx_\" + name + \"Plus\",\n            flSx : \"flanking_Sx_\" + name,\n            flSxPlus : \"flanking_Sx_\" + name + \"Plus\",\n            flTot: \"flanking_tot_\" + name,\n            flTotPlus : \"flanking_tot_\" + name + \"Plus\"\n        }\n        return [null,msg,null,null];\n    }\n}\nelse if(msg.payload.zip===\"yes\") {\n    msg.payload.outputname = msg.payload.outputname.slice(0,-6) + \".zip\";\n    msg.payload.pathIn = \"extractFromAugustus/out\"\n    msg.payload.pathOut = \"extractFromAugustus/\"+msg.payload.outputname\n    return [null,null,msg,null]\n}\n}\nelse {\n    return [null,null,null,msg]\n}","outputs":4,"noerr":0,"initialize":"","finalize":"","x":1320,"y":280,"wires":[["1385cb8f.d26af4"],["d2cfd0d4.a673e"],["5722482a.183898"],["71deb3d.712674c"]]},{"id":"1385cb8f.d26af4","type":"delay","z":"5ee18230.15372c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1520,"y":200,"wires":[["6b92385b.982fd8"]]},{"id":"d2cfd0d4.a673e","type":"delay","z":"5ee18230.15372c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1520,"y":260,"wires":[["94dc2aab.97c698"]]},{"id":"94dc2aab.97c698","type":"template","z":"5ee18230.15372c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromAugustus/out/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flDx}}\" onclick=\"clickAndDisable(this);\">{{payload.flDx}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flDxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flDxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flSx}}\" onclick=\"clickAndDisable(this);\">{{payload.flSx}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flSxPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flSxPlus}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flTot}}\" onclick=\"clickAndDisable(this);\">{{payload.flTot}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.flTotPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.flTotPlus}}</a> <br><br>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1890,"y":260,"wires":[["73d6751b.c4f12c"]]},{"id":"6b92385b.982fd8","type":"template","z":"5ee18230.15372c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>   \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/extractFromAugustus/out/{{payload.fasta}}\" onclick=\"clickAndDisable(this);\">{{payload.fasta}}</a> <br><br>\n    <a href=\"/file/extractFromAugustus/out/{{payload.fastaPlus}}\" onclick=\"clickAndDisable(this);\">{{payload.fastaPlus}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1890,"y":200,"wires":[["73d6751b.c4f12c"]]},{"id":"57f00952.24d828","type":"ui_text","z":"5ee18230.15372c","group":"6bf434f.b6a95cc","order":1,"width":"26","height":"9","name":"noauthFasta","label":"YOU AREN'T AUTHENTICATED","format":"Please sign in in Dashboard.","layout":"col-center","x":190,"y":360,"wires":[]},{"id":"66aa60b6.29f4d","type":"fs-ops-delete","z":"5ee18230.15372c","name":"Delete Fasta","path":"","pathType":"str","filename":"payload.fasta","filenameType":"msg","x":1210,"y":400,"wires":[[]]},{"id":"5e3242df.7234cc","type":"fs-ops-delete","z":"5ee18230.15372c","name":"Delete Augustus","path":"","pathType":"str","filename":"payload.au","filenameType":"msg","x":1220,"y":440,"wires":[[]]},{"id":"1da7864b.61c96a","type":"change","z":"5ee18230.15372c","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.stdout","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1280,"y":120,"wires":[["993d047d.42a9f8"]]},{"id":"5722482a.183898","type":"zip_folder","z":"5ee18230.15372c","name":"","pathIn":"","pathOut":"","x":1520,"y":320,"wires":[["52da7a31.6c4784"]]},{"id":"52da7a31.6c4784","type":"delay","z":"5ee18230.15372c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1700,"y":320,"wires":[["cbfbff9c.3ba2d"]]},{"id":"cbfbff9c.3ba2d","type":"template","z":"5ee18230.15372c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n    <script> \n   function clickAndDisable(link) {\n     // disable subsequent clicks\n     link.onclick = function(event) {\n        event.preventDefault();\n     }\n   }   \n</script>  \n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files Uploaded !</h1>\n<h3>Click the name for download it</h3>\n<div>\n    <a href=\"/file/{{payload.pathOut}}\" onclick=\"clickAndDisable(this);\">{{payload.outputname}}</a>\n</div>\n</center>\n</body>\n</html>","output":"str","x":1890,"y":320,"wires":[["73d6751b.c4f12c"]]},{"id":"71deb3d.712674c","type":"delay","z":"5ee18230.15372c","name":"","pauseType":"delay","timeout":"3","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1520,"y":380,"wires":[["e989d64a.f5bf58"]]},{"id":"e989d64a.f5bf58","type":"template","z":"5ee18230.15372c","name":"html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<html>\n  <head>\n      </head>\n  <body>\n      <center>\n<h1>Files NOT Uploaded !</h1>\n<h3>There was an error in the process. Please, repeat the procedure</h3>\n</center>\n</body>\n</html>","output":"str","x":1890,"y":380,"wires":[["73d6751b.c4f12c"]]},{"id":"b78e86bc.501948","type":"extract_intron_from_gtf_augustus","z":"5ee18230.15372c","name":"","fasta":"","au":"","pathfolder":"","outputname":"","flanking":"","x":1060,"y":280,"wires":[["ab76e6f9.d84d98","1da7864b.61c96a","66aa60b6.29f4d","5e3242df.7234cc"]]},{"id":"81a38a69.0a5a38","type":"ui_group","z":"","name":"ExtractFromAugustus","tab":"baf315b3.b9d9a8","order":1,"disp":false,"width":"27","collapse":false},{"id":"6bf434f.b6a95cc","type":"ui_group","z":"","name":"AuthMessage","tab":"baf315b3.b9d9a8","order":2,"disp":false,"width":"27","collapse":false},{"id":"baf315b3.b9d9a8","type":"ui_tab","z":"","name":"ExtractFromAugustus","icon":"dashboard","order":12,"disabled":false,"hidden":false}]
```

#### Login

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/Login.PNG)

```json
[{"id":"c1d8eb81.11d2e8","type":"tab","label":"Login","disabled":false,"info":""},{"id":"e11530a3.8e5fc","type":"ui_form","z":"c1d8eb81.11d2e8","name":"Dashboard Sign-In","label":"","group":"9a05f5d3.9d47a8","order":0,"width":"6","height":"8","options":[{"label":"username","value":"username","type":"text","required":true,"rows":null},{"label":"password","value":"password","type":"password","required":true,"rows":null}],"formValue":{"username":"","password":""},"payload":"","submit":"submit","cancel":"cancel","topic":"","x":250,"y":140,"wires":[["646a6e75.884a1","1975c65d.f26b9a","2694f129.9d665e"]]},{"id":"d865852.cffee78","type":"debug","z":"c1d8eb81.11d2e8","name":"Debug Account Log ","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":818.0000915527344,"y":101.00000762939453,"wires":[]},{"id":"539a437e.bf213c","type":"comment","z":"c1d8eb81.11d2e8","name":"Sign-In Section","info":"","x":250.00000762939453,"y":82.99999618530273,"wires":[]},{"id":"646a6e75.884a1","type":"function","z":"c1d8eb81.11d2e8","name":"Account Log","func":"var accountlog =  flow.get(\"accountlog\") || [] ; \n\naccountlog.push({ accessAt : new Date(), username : msg.payload.username})\n\nflow.set(\"accountlog\", accountlog);\n\nmsg.payload = accountlog;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":449.00000762939453,"y":109.99999618530273,"wires":[["d865852.cffee78"]]},{"id":"1975c65d.f26b9a","type":"function","z":"c1d8eb81.11d2e8","name":"Account Verification","func":"var accounts =  flow.get(\"accounts\") || [ { username : \"admin\", password : \"admin\"},{ username : \"guest\", password : \"guest\"}] ; \n\nvar username = msg.payload.username ;\nvar password = msg.payload.password ; \n\nmsg.payload = 1;\n\naccounts.forEach(function ( account ){\n    if ( account.username == username ) {\n       msg.payload = 2;\n       if ( account.password == password ) {\n           msg.payload = 0;\n       } \n    }\n});\n\n/*if ( msg.payload === 0 ) {\n  var currentsocketid = flow.get(\"clientid\") || undefined;\n  if ( currentsocketid !== undefined && currentsocketid !== msg.socketid ) msg.payload = 3;\n}*/\n// keep the original socketid from msg.socketid;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":462.0000457763672,"y":155.0000057220459,"wires":[["3d4cac81.692794"]]},{"id":"3d4cac81.692794","type":"switch","z":"c1d8eb81.11d2e8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":631.0000419616699,"y":185.9999885559082,"wires":[["858d459.bb004b8"],["bd43a7e.74dc158"],["31372466.465fdc"]]},{"id":"858d459.bb004b8","type":"function","z":"c1d8eb81.11d2e8","name":"= 0 : Success","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nflow.set(\"sessionTimer\", currTime);\nflow.set(\"clientid\", msg.socketid);\n/* ui-control payload */\nmsg.payload = { group: {\n    show : [\"IncrementFasta_IncrementFasta\", \"ExtractFromCUFF_ExtractFromCUFF\",\"RemoveFromFasta_RemoveFromFasta\",\"ExtractFromTopat_ExtractFromTopat\", \"MergeFasta_MergeFasta\",\"RemoveNucleotides_RemoveNucleotides\", \"ExtractFromAugustus_ExtractFromAugustus\", \"Dashboard_Signout\"],\n    hide : [\"Dashboard_Signin\", \"IncrementFasta_AuthMessage\", \"ExtractFromCUFF_AuthMessage\",\"ExtractFromTopat_AuthMessage\",\"RemoveFromFasta_AuthMessage\", \"MergeFasta_AuthMessage\",\"RemoveNucleotides_AuthMessage\",\"ExtractFromAugustus_AuthMessage\"]\n    }\n};\n\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":800.999885559082,"y":141.99999809265137,"wires":[["bdf86d0e.78e46"]]},{"id":"bd43a7e.74dc158","type":"function","z":"c1d8eb81.11d2e8","name":"= 1 : Unknown User","func":"msg.payload = \"Username Doesn't exist!!!\"\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":821.9998931884766,"y":179,"wires":[["4d35af84.a80b9"]]},{"id":"31372466.465fdc","type":"function","z":"c1d8eb81.11d2e8","name":"= 2 : Wrong Password","func":"msg.payload = \"Invalid Password\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":822.9999618530273,"y":216.0000123977661,"wires":[["4d35af84.a80b9"]]},{"id":"bdf86d0e.78e46","type":"ui_ui_control","z":"c1d8eb81.11d2e8","name":"Go to App Groups","events":"all","x":1058.0000686645508,"y":141.9999942779541,"wires":[[]]},{"id":"4d35af84.a80b9","type":"ui_toast","z":"c1d8eb81.11d2e8","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Authentication Failed","name":"Authentication Failure Dialog","x":1087.9999732971191,"y":199,"wires":[[]]},{"id":"ccdf819a.6d233","type":"ui_ui_control","z":"c1d8eb81.11d2e8","name":"Go to Signin Group","x":610,"y":360,"wires":[[]]},{"id":"d17450c0.7d819","type":"function","z":"c1d8eb81.11d2e8","name":"Sign-In Redirection","func":"msg = {};\n\nmsg.socketid = flow.get(\"clientid\") || undefined;\nmsg.payload = { group: {\n    show : [\"Dashboard_Signin\", \"IncrementFasta_AuthMessage\", \"ExtractFromCUFF_AuthMessage\",\"ExtractFromTopat_AuthMessage\",\"RemoveFromFasta_AuthMessage\", \"MergeFasta_AuthMessage\",\"RemoveNucleotides_AuthMessage\", \"ExtractFromAugustus_AuthMessage\"],\n    hide : [\"IncrementFasta_IncrementFasta\", \"ExtractFromCUFF_ExtractFromCUFF\",\"RemoveFromFasta_RemoveFromFasta\",\"ExtractFromTopat_ExtractFromTopat\",\"MergeFasta_MergeFasta\",\"RemoveNucleotides_RemoveNucleotides\", \"ExtractFromAugustus_ExtractFromAugustus\", \"Dashboard_Signout\"]\n}\n};\nflow.set(\"sessionTimer\", 0);\n\nflow.set(\"clientid\", undefined);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":390,"y":360,"wires":[["ccdf819a.6d233"]]},{"id":"2694f129.9d665e","type":"debug","z":"c1d8eb81.11d2e8","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","x":431.5000419616699,"y":220.5347557067871,"wires":[]},{"id":"ed149f46.8e455","type":"ui_button","z":"c1d8eb81.11d2e8","name":"Signout","group":"49d30552.ded39c","order":2,"width":0,"height":0,"passthru":false,"label":"Log Out","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":220,"y":360,"wires":[["d17450c0.7d819"]]},{"id":"3d926528.f017fa","type":"comment","z":"c1d8eb81.11d2e8","name":"Session Management - 1 h","info":"","x":250,"y":440,"wires":[]},{"id":"908cd8bb.262218","type":"inject","z":"c1d8eb81.11d2e8","name":"Session Timeout","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"3","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":210,"y":540,"wires":[["a730fc14.b4fd5","cc0d7bcd.4bc7b8"]]},{"id":"a730fc14.b4fd5","type":"function","z":"c1d8eb81.11d2e8","name":"Detect Session Timer","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar SESSION_TIMEOUT = 3600000; //1h\n\n\nif ( sessionTimer === 0 /* Inactive, No user signed in */ ) {\n    msg.payload = 2;\n} else {\n    if ( currTime - sessionTimer > SESSION_TIMEOUT ) {\n      msg.payload = 0;  \n    } else {\n      msg.payload = 1;        \n    }\n}\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":406.50003814697266,"y":495,"wires":[["5736b6c1.bddc78"]]},{"id":"5736b6c1.bddc78","type":"switch","z":"c1d8eb81.11d2e8","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"0","vt":"str"},{"t":"eq","v":"1","vt":"str"},{"t":"eq","v":"2","vt":"str"}],"checkall":"true","repair":false,"outputs":3,"x":576.500072479248,"y":493,"wires":[["d4b94a49.aa37c8"],[],["bcb19d35.a1dcc"]]},{"id":"d4b94a49.aa37c8","type":"function","z":"c1d8eb81.11d2e8","name":"Time-Out","func":"/* activate session timer */\nvar sessionTimer =  flow.get(\"sessionTimer\") || 0; \nflow.set(\"sessionTimer\", 0);\n\nmsg.socketid = flow.get(\"clientid\") || undefined;\nmsg.payload = \"Session Expired! Please singin again!\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":732.4999847412109,"y":466.00000381469727,"wires":[["4053fb88.7839f4","13336fc9.464be"]]},{"id":"4053fb88.7839f4","type":"ui_toast","z":"c1d8eb81.11d2e8","position":"dialog","displayTime":"3","highlight":"","outputs":1,"ok":"OK","cancel":"","topic":"Session Timeout","name":"Time-Out Dialog","x":920.000114440918,"y":432.00000381469727,"wires":[[]]},{"id":"b74c5047.960b8","type":"ui_ui_control","z":"c1d8eb81.11d2e8","name":"Go to Signin Group","events":"all","x":1130,"y":480,"wires":[[]]},{"id":"13336fc9.464be","type":"function","z":"c1d8eb81.11d2e8","name":"Sign-In Redirection","func":"msg = {};\n\nmsg.socketid = flow.get(\"clientid\") || undefined;\nmsg.payload = { group: {\n    show : [\"Dashboard_Signin\", \"IncrementFasta_AuthMessage\", \"ExtractFromCUFF_AuthMessage\",\"ExtractFromTopat_AuthMessage\",\"MergeFasta_AuthMessage\",\"RemoveFromFasta_AuthMessage\",\"RemoveNucleotides_AuthMessage\", \"ExtractFromAugustus_AuthMessage\"],\n    hide : [\"IncrementFasta_IncrementFasta\", \"ExtractFromCUFF_ExtractFromCUFF\",\"RemoveFromFasta_RemoveFromFasta\",\"ExtractFromTopat_ExtractFromTopat\",\"MergeFasta_MergeFasta\",\"RemoveNucleotides_RemoveNucleotides\", \"ExtractFromAugustus_ExtractFromAugustus\", \"Dashboard_Signout\"]\n}\n};\n\nflow.set(\"clientid\", undefined);\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":930,"y":480,"wires":[["b74c5047.960b8"]]},{"id":"2c323911.6e7706","type":"ui_toast","z":"c1d8eb81.11d2e8","position":"bottom right","displayTime":"1","highlight":"","outputs":0,"ok":"OK","cancel":"","topic":"Timer","name":"Display Remaining Time","x":750,"y":640,"wires":[]},{"id":"cc0d7bcd.4bc7b8","type":"function","z":"c1d8eb81.11d2e8","name":"Calculating Remaining Time (Debug)","func":"var sessionTimer =  flow.get(\"sessionTimer\") || 0; \nvar currTime = Date.now();\nvar remainingSecs = Math.floor((3600000 - (currTime - sessionTimer))/1000) + 1;\n    \nif ( sessionTimer === 0 /* Inactive, No user signed in */ ) {\n    return null;\n} else {\n    \n    if ( remainingSecs <= 7 ) msg.payload = \"Remaining : \" + remainingSecs + \" secs\";  \n    else return null;\n}\n\nmsg.socketid = flow.get(\"clientid\") || \"B1234\";\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":456.5000305175781,"y":583.0000123977661,"wires":[["2c323911.6e7706"]]},{"id":"bcb19d35.a1dcc","type":"function","z":"c1d8eb81.11d2e8","name":"Signin Goup","func":"msg = {};\nmsg.payload = { group: {\n    show : [\"Dashboard_Signin\", \"IncrementFasta_AuthMessage\", \"ExtractFromCUFF_AuthMessage\",\"ExtractFromTopat_AuthMessage\",\"RemoveFromFasta_AuthMessage\",\"MergeFasta_AuthMessage\",\"RemoveNucleotides_AuthMessage\", \"ExtractFromAugustus_AuthMessage\"],\n    hide : [\"IncrementFasta_IncrementFasta\", \"ExtractFromCUFF_ExtractFromCUFF\",\"RemoveFromFasta_RemoveFromFasta\",\"ExtractFromTopat_ExtractFromTopat\",\"MergeFasta_MergeFasta\", \"RemoveNucleotides_RemoveNucleotides\", \"ExtractFromAugustus_ExtractFromAugustus\", \"Dashboard_Signout\"]\n}\n};\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":730,"y":540,"wires":[["c3e88f30.8b407"]]},{"id":"c3e88f30.8b407","type":"ui_ui_control","z":"c1d8eb81.11d2e8","name":"Go to Signin Group","events":"all","x":950,"y":540,"wires":[[]]},{"id":"806527a3.745648","type":"ui_text","z":"c1d8eb81.11d2e8","group":"49d30552.ded39c","order":1,"width":0,"height":0,"name":"SignoutText","label":"YOU ARE CORRECTLY LOGGED IN","format":"Click here to log out.","layout":"col-center","x":230,"y":300,"wires":[]},{"id":"9a05f5d3.9d47a8","type":"ui_group","z":"","name":"Signin","tab":"c47db8da.3fc968","order":1,"disp":true,"width":"6","collapse":false},{"id":"49d30552.ded39c","type":"ui_group","z":"","name":"Signout","tab":"c47db8da.3fc968","order":2,"disp":false,"width":"6","collapse":false},{"id":"c47db8da.3fc968","type":"ui_tab","z":"","name":"Dashboard","icon":"dashboard","order":5}]
```
#### GetFile

![N|Solid](https://github.com/leonardovito/node-red-biounicam-tool/blob/master/.img_Flows/GetFile.PNG)

```json
[{"id":"91640969.c309e8","type":"tab","label":"GetFile","disabled":false,"info":""},{"id":"2708d391.56816c","type":"function","z":"91640969.c309e8","name":"Set base path","func":"msg.filename = msg.req.params.dir + \"/out/\" + msg.req.params.name\nmsg.payload = msg.filename\nreturn [msg, null];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":100,"wires":[["9362f573.f2ba38","2058233.3dbbcdc"]]},{"id":"da93d2b.b20353","type":"http response","z":"91640969.c309e8","name":"","statusCode":"","headers":{},"x":870,"y":100,"wires":[]},{"id":"9362f573.f2ba38","type":"file in","z":"91640969.c309e8","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":590,"y":100,"wires":[["da93d2b.b20353","967ae5dd.1101c8"]]},{"id":"2aeb4769.169598","type":"catch","z":"91640969.c309e8","name":"","scope":null,"uncaught":false,"x":900,"y":220,"wires":[["61d47db1.595244","551f543c.eb776c"]]},{"id":"61d47db1.595244","type":"function","z":"91640969.c309e8","name":"Set 404","func":"msg.payload = msg.error;\nmsg.statusCode = 404;//resource not found\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1100,"y":220,"wires":[["da93d2b.b20353"]]},{"id":"551f543c.eb776c","type":"debug","z":"91640969.c309e8","name":"msg","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1010,"y":280,"wires":[]},{"id":"e967e75.ac04918","type":"http in","z":"91640969.c309e8","name":"","url":"/file/:dir/out/:name","method":"get","upload":false,"swaggerDoc":"","x":140,"y":100,"wires":[["2708d391.56816c"]]},{"id":"8d608aed.f16798","type":"fs-ops-delete","z":"91640969.c309e8","name":"","path":"","pathType":"str","filename":"filename","filenameType":"msg","x":570,"y":280,"wires":[[]]},{"id":"967ae5dd.1101c8","type":"function","z":"91640969.c309e8","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":160,"wires":[["2058233.3dbbcdc"]]},{"id":"2058233.3dbbcdc","type":"join","z":"91640969.c309e8","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":510,"y":220,"wires":[["8d608aed.f16798"]]},{"id":"160ff705.cba5a9","type":"function","z":"91640969.c309e8","name":"Set base path","func":"msg.filename = msg.req.params.dir + \"/\" + msg.req.params.name\nmsg.payload = msg.filename\nreturn [msg, null];","outputs":1,"noerr":0,"initialize":"","finalize":"","x":360,"y":380,"wires":[["c3ecc1b3.cb2e6","fa30607b.a2309"]]},{"id":"c24b631.516d4a","type":"http response","z":"91640969.c309e8","name":"","statusCode":"","headers":{},"x":870,"y":380,"wires":[]},{"id":"c3ecc1b3.cb2e6","type":"file in","z":"91640969.c309e8","name":"","filename":"","format":"","chunk":false,"sendError":false,"encoding":"none","x":590,"y":380,"wires":[["c24b631.516d4a","48fb4176.1796e"]]},{"id":"5083993f.468f38","type":"catch","z":"91640969.c309e8","name":"","scope":null,"uncaught":false,"x":900,"y":500,"wires":[["3dc42d5e.18b4b2","bc22c1a3.0e641"]]},{"id":"3dc42d5e.18b4b2","type":"function","z":"91640969.c309e8","name":"Set 404","func":"msg.payload = msg.error;\nmsg.statusCode = 404;//resource not found\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":1100,"y":500,"wires":[["c24b631.516d4a"]]},{"id":"bc22c1a3.0e641","type":"debug","z":"91640969.c309e8","name":"msg","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1010,"y":560,"wires":[]},{"id":"7d4e03f9.d411ac","type":"http in","z":"91640969.c309e8","name":"","url":"/file/:dir/:name","method":"get","upload":false,"swaggerDoc":"","x":130,"y":380,"wires":[["160ff705.cba5a9"]]},{"id":"8f05729d.449b6","type":"fs-ops-delete","z":"91640969.c309e8","name":"","path":"","pathType":"str","filename":"filename","filenameType":"msg","x":570,"y":560,"wires":[[]]},{"id":"48fb4176.1796e","type":"function","z":"91640969.c309e8","name":"","func":"msg.payload = null;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":620,"y":440,"wires":[["fa30607b.a2309"]]},{"id":"fa30607b.a2309","type":"join","z":"91640969.c309e8","name":"","mode":"custom","build":"array","property":"payload","propertyType":"msg","key":"","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"","count":"2","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":510,"y":500,"wires":[["8f05729d.449b6"]]}]
```
